<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>《数据密集型应用系统设计》阅读笔记 | 📕</title>
    <meta name="description" content="简超平的部落格">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.7f80ba17.css" as="style"><link rel="preload" href="/assets/js/app.93834c86.js" as="script"><link rel="preload" href="/assets/js/4.d0d40b3c.js" as="script"><link rel="preload" href="/assets/js/5.389afcf9.js" as="script"><link rel="preload" href="/assets/js/22.2569694e.js" as="script"><link rel="prefetch" href="/assets/js/1.0e3363a5.js"><link rel="prefetch" href="/assets/js/10.004251e0.js"><link rel="prefetch" href="/assets/js/11.cd06fc8e.js"><link rel="prefetch" href="/assets/js/12.7fb7ffd0.js"><link rel="prefetch" href="/assets/js/13.d123b4a6.js"><link rel="prefetch" href="/assets/js/14.859243a0.js"><link rel="prefetch" href="/assets/js/15.708cd98c.js"><link rel="prefetch" href="/assets/js/16.977e0851.js"><link rel="prefetch" href="/assets/js/17.0e33bb2e.js"><link rel="prefetch" href="/assets/js/18.7229d043.js"><link rel="prefetch" href="/assets/js/19.cefca086.js"><link rel="prefetch" href="/assets/js/20.f42970b9.js"><link rel="prefetch" href="/assets/js/21.b875772e.js"><link rel="prefetch" href="/assets/js/23.5b14ac20.js"><link rel="prefetch" href="/assets/js/24.7f95a341.js"><link rel="prefetch" href="/assets/js/25.1e7ba5d3.js"><link rel="prefetch" href="/assets/js/26.cb0e296f.js"><link rel="prefetch" href="/assets/js/27.63190df1.js"><link rel="prefetch" href="/assets/js/28.a9e63d63.js"><link rel="prefetch" href="/assets/js/29.fd5b8bab.js"><link rel="prefetch" href="/assets/js/30.05e5d9ab.js"><link rel="prefetch" href="/assets/js/31.2b528cf3.js"><link rel="prefetch" href="/assets/js/32.08cdb480.js"><link rel="prefetch" href="/assets/js/33.fbebb0c1.js"><link rel="prefetch" href="/assets/js/34.286bba4e.js"><link rel="prefetch" href="/assets/js/35.9b09fa22.js"><link rel="prefetch" href="/assets/js/36.ea122fbb.js"><link rel="prefetch" href="/assets/js/37.f72258bb.js"><link rel="prefetch" href="/assets/js/38.95cfaed3.js"><link rel="prefetch" href="/assets/js/39.ee45b77d.js"><link rel="prefetch" href="/assets/js/40.d82da256.js"><link rel="prefetch" href="/assets/js/41.383e3081.js"><link rel="prefetch" href="/assets/js/42.9a273559.js"><link rel="prefetch" href="/assets/js/43.a01a0b9c.js"><link rel="prefetch" href="/assets/js/44.c389b251.js"><link rel="prefetch" href="/assets/js/45.0bc35520.js"><link rel="prefetch" href="/assets/js/46.10c462ae.js"><link rel="prefetch" href="/assets/js/47.348bba43.js"><link rel="prefetch" href="/assets/js/48.d9b14b72.js"><link rel="prefetch" href="/assets/js/49.038243d8.js"><link rel="prefetch" href="/assets/js/50.d7765422.js"><link rel="prefetch" href="/assets/js/51.cce69139.js"><link rel="prefetch" href="/assets/js/52.0b2ce02c.js"><link rel="prefetch" href="/assets/js/53.95b4de39.js"><link rel="prefetch" href="/assets/js/54.8382fc44.js"><link rel="prefetch" href="/assets/js/6.e77b577d.js"><link rel="prefetch" href="/assets/js/7.af44ff20.js"><link rel="prefetch" href="/assets/js/8.9c864f81.js"><link rel="prefetch" href="/assets/js/9.ee931a16.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.e845127a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f80ba17.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuperess-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">📕
        </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">编程</a></li><li class="nav-item"><a href="/post/" class="nav-link router-link-active">文集</a></li><li class="nav-item"><a href="/tag/" class="nav-link">标签</a></li><li class="nav-item"><a href="/me.html" class="nav-link">About</a></li><li class="nav-item"><a href="https://github.com/xiaop1ng" target="_blank" rel="noopener noreferrer" class="nav-link external">GitHub</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">📕
      </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">编程</a></li><li class="mobile-nav-item"><a href="/post/" class="nav-link router-link-active">文集</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">标签</a></li><li class="mobile-nav-item"><a href="/me.html" class="nav-link">About</a></li><li class="mobile-nav-item"><a href="https://github.com/xiaop1ng" target="_blank" rel="noopener noreferrer" class="nav-link external">GitHub</a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuperess-theme-blog__post-layout"><div class="vuepress-blog-theme-content"><div class="content__default"><h1 id="《数据密集型应用系统设计》阅读笔记"><a href="#《数据密集型应用系统设计》阅读笔记" class="header-anchor">#</a> 《数据密集型应用系统设计》阅读笔记</h1> <h2 id="数据系统基础"><a href="#数据系统基础" class="header-anchor">#</a> 数据系统基础</h2> <p>那么什么算是 “数据密集型&quot; (data-intensive)呢？
对于一个应用系统， 如果 “数据“ 是其成败决定性因素， 包括数据的规模 、 数据的复杂度或者数据产
生与变化的速率等， 我们就可以称为 “数据密集型应用系统”；与之对应的是计算密集型，CPU 主频往往是后者最大的制约瓶颈。</p> <ul><li>可靠性 -&gt; 容忍硬件、软件失效等错误、容忍用户出现不正确的软件使用方法（确保功能正确）</li> <li>可扩展性 -&gt; 负载、性能、延迟（解决规模增长问题）</li> <li>可维护性 -&gt; 可运维（平稳运行）、简单性（降低复杂性）、可演化性（可塑性，易改性）</li></ul> <blockquote><p>互联网做得太出色了， 以至于很多人把它看作某种像太平洋 一样的自然资源， 而非人造的。 你还记得上一个达到如此规模而又这样健壮的技术是什么？</p></blockquote> <ol><li><p>TimeLine: 当用户查看 TimeLine 时，先查询所有关注的对象，列出这些人的动态，最后按时间倒序排序</p></li> <li><p>TimeLine: 对每个用户的时间线维护一个缓存，当用户发送动态时，查询他的 Follower，将动态插入到每个关注者的 TimeLine 缓存中</p></li> <li><p>结合1和2，对于关注量大的账户采用方式1，对于关注量正常的采用方式2，用户在查看 TimeLine 时读取自己的 TimeLine 缓存（方案2）和查询受关注
量大的对象，列出这些人的动态，最后合并两个结果集</p></li></ol> <p>运行的延迟和响应时长</p> <p>垂直扩展：升级到更强大的机器
水平扩展：将负载分布到多个更小的机器</p> <p>简化系统设计并不意味着减少系统功能</p> <blockquote><p>语言的边界就是世界的边界</p></blockquote> <p>个人觉得也可以说：想象力的边界就是世界的边界。</p> <p>字节表示方式：（电流、磁场、光脉冲）</p> <h3 id="数据处理系统一般包含"><a href="#数据处理系统一般包含" class="header-anchor">#</a> 数据处理系统一般包含</h3> <ul><li>数据库</li> <li>缓存</li> <li>索引</li> <li>异步消息</li> <li>批处理</li></ul> <p>应用开发者，同时也是数据系统设计师</p> <p>在网络模型中，链接的访问路径，不是用外键记录，而更像是编程语言中的指针。访问路径像是遍历链表。</p> <p>MySQL 在 alert table 时会把现在的整张表复制</p> <p>图状数据模型</p> <p>社交网络，顶点是人，边指示那些人彼此认识</p> <p>广义的日志：一个仅能追加的记录序列集合</p> <p>由于每次写数据时，需要更新索引，因此任何类型的索引通常都会降低写的速度。</p> <p>特殊的删除记录（墓碑）</p> <p>Datalog语言</p> <p>数据库核心：数据结构</p> <h2 id="分布式数据系统"><a href="#分布式数据系统" class="header-anchor">#</a> 分布式数据系统</h2> <blockquote><p>如果你把东西整理得井井有条，下次就不用查找了。</p></blockquote> <h2 id="派生数据"><a href="#派生数据" class="header-anchor">#</a> 派生数据</h2> <h3 id="向后兼容"><a href="#向后兼容" class="header-anchor">#</a> 向后兼容</h3> <p>较新的代码可以读取由旧代码编写的数据。</p> <h3 id="向前兼容"><a href="#向前兼容" class="header-anchor">#</a> 向前兼容</h3> <p>较旧的代码可以读取由新代码编写的数据。</p> <blockquote><p>成功的技术应首先处理现实问题，因为现实无法被愚弄。</p></blockquote> <blockquote><p>一个可能出错的事物与 一个不可能出错的事物之间的主要区别是， 当 一个不可能出错的事物出错了， 通常也就意味着不可修复。</p></blockquote> <h2 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h2> <p>从理论上来讲，隔离是假装没有发生并发</p> <p>读倾斜（skew）：不可重复读，发生于两个读操作 ReadA、ReadB 中间穿插了一个写操作 WriteC，读取到的 A，B 的值不对。A 的值是写之前的值，而 B 的值已经是写之后的值了</p> <p>多版本技术实现快照级别隔离可以解决读倾斜的问题，即确保读到同版本的数据。</p> <blockquote><p>FOR UPDATE指令指示数据库对返回的所有结果行要加锁。</p></blockquote> <p>系统越大，其中局部组件失效的概率就越大</p> <blockquote><p>依赖同步的时间</p></blockquote> <p>一天可能不总是 86400秒</p> <h3 id="一致性与共识"><a href="#一致性与共识" class="header-anchor">#</a> 一致性与共识</h3> <blockquote><p>错误的活着还是正确的挂掉</p></blockquote> <blockquote><p>如果船长的最高目标是保住他的船，那么他只能永远待在港口</p></blockquote></div> <hr> <!----></div> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#数据系统基础" title="数据系统基础">数据系统基础</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#数据处理系统一般包含" title="数据处理系统一般包含">数据处理系统一般包含</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#分布式数据系统" title="分布式数据系统">分布式数据系统</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#派生数据" title="派生数据">派生数据</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#向后兼容" title="向后兼容">向后兼容</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#向前兼容" title="向前兼容">向前兼容</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#事务" title="事务">事务</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#一致性与共识" title="一致性与共识">一致性与共识</a></div></div></div></div> <footer class="footer" data-v-0d113134><div class="footer-left-wrap" data-v-0d113134><ul class="contact" data-v-0d113134><li class="contact-item" data-v-0d113134><a href="https://github.com/xiaop1ng" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-0d113134><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-0d113134><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-0d113134></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-0d113134><ul class="copyright" data-v-0d113134><li class="copyright-item" data-v-0d113134><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-0d113134>Privacy Policy</a></li><li class="copyright-item" data-v-0d113134><a href="/" class="nav-link" data-v-0d113134>Copyright xiaop1ng © 2015 - 2021</a></li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.93834c86.js" defer></script><script src="/assets/js/4.d0d40b3c.js" defer></script><script src="/assets/js/5.389afcf9.js" defer></script><script src="/assets/js/22.2569694e.js" defer></script>
  </body>
</html>
